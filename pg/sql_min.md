# üß™ –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ - PostgreSQL (–æ–±—â–∏–π –º–∏–Ω–∏–º—É–º)

## ‚úÖ –ó–∞–¥–∞–Ω–∏—è

### 1. **–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î**
1.1. –ù–∞–ø–∏—Å–∞—Ç—å SQL (DDL) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü `orders` –∏ `shipments` —Å:
- Primary / Foreign keys
- `NOT NULL`, `CHECK`, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ `due_date`, `priority`, `product`

1.2. –î–æ–±–∞–≤–∏—Ç—å –≤ `orders` –ø–æ–ª–µ `status`, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –æ—Ç—Ä–∞–∂–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è:
- `pending` ‚Äî –Ω–µ—Ç –æ—Ç–≥—Ä—É–∑–æ–∫
- `partial` ‚Äî –æ—Ç–≥—Ä—É–∂–µ–Ω–æ < quantity
- `completed` ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–≥—Ä—É–∂–µ–Ω–æ

---

### 2. **SQL-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
–ù–∞–ø–∏—Å–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã:

2.1. –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ —Å –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è  
2.2. –¢–û–ü-3 –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ —Å—É–º–º–∞—Ä–Ω–æ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–∫–∞–∑–æ–≤  
2.3. –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã (–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏ `due_date < today`)  
2.4. –ö—É–º—É–ª—è—Ç–∏–≤–Ω—ã–π –æ–±—ä—ë–º –æ—Ç–≥—Ä—É–∑–æ–∫ –ø–æ –¥–∞—Ç–∞–º (–æ–∫–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è)

---

### 3. **–§—É–Ω–∫—Ü–∏–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã (PL/pgSQL)**

3.1. –§—É–Ω–∫—Ü–∏—è `fn_order_fill_rate(p_order_id)` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç % –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞  
3.2. –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ `shipments`, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç `orders.status`  
3.3. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ `sp_bulk_load_orders(json)` –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–∫–∞–∑–æ–≤

---

### 4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**

–ö–∞–Ω–¥–∏–¥–∞—Ç—É –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω ‚Äú–º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å‚Äù ‚Äî –Ω—É–∂–Ω–æ:

4.1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `EXPLAIN ANALYZE`  
4.2. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é (–∏–Ω–¥–µ–∫—Å—ã / —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞)  
4.3. –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ **–¥–æ/–ø–æ—Å–ª–µ**

---

### 5. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ PostgreSQL**

5.1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø—Ä–∞–≤–∞:
- `frepple_app` ‚Üí –¥–æ—Å—Ç—É–ø –Ω–∞ –∑–∞–ø–∏—Å—å –≤ —Å—Ö–µ–º—É `app`
- `report_user` ‚Üí —Ç–æ–ª—å–∫–æ SELECT

5.2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±—ç–∫–∞–ø—ã:
- –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π `pg_dump`
- —Ö—Ä–∞–Ω–µ–Ω–∏–µ 7 –¥–Ω–µ–π
- –ø—Ä–∏–º–µ—Ä restore-–ø—Ä–æ–≤–µ—Ä–∫–∏

5.3. –û–±—ä—è—Å–Ω–∏—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
- `shared_buffers`
- `work_mem`
- `maintenance_work_mem`
- `effective_cache_size`

5.4. –û–ø–∏—Å–∞—Ç—å:
- –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ (WAL, —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –∏ –ª–æ–≥–∏—á–µ—Å–∫–∞—è, replication slots)
- –Ω–∞—Å—Ç—Ä–æ–π–∫—É `pg_hba.conf` (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø)

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–¥–∞—á–∏

–ö–∞–Ω–¥–∏–¥–∞—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å:

‚úÖ SQL-—Å–∫—Ä–∏–ø—Ç—ã  
‚úÖ –ö—Ä–∞—Ç–∫–∏–π –æ—Ç—á—ë—Ç —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏ –ø—Ä–∏–Ω—è—Ç—ã—Ö —Ä–µ—à–µ–Ω–∏–π  
‚úÖ (–ë—É–¥–µ—Ç –ø–ª—é—Å–æ–º) `docker-compose.yml` —Å PostgreSQL  
‚úÖ (–ë—É–¥–µ—Ç –ø–ª—é—Å–æ–º) –ø—Ä–∏–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±—ç–∫–∞–ø–æ–≤

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –ë–∞–ª–ª—ã (0‚Äì2) |
|---|---:|
| –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ö–µ–º—ã –ë–î | ‚òê 0 ‚òê 1 ‚òê 2 |
| –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | ‚òê 0 ‚òê 1 ‚òê 2 |
| –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ SQL | ‚òê 0 ‚òê 1 ‚òê 2 |
| PL/pgSQL (—Ñ—É–Ω–∫—Ü–∏–∏, —Ç—Ä–∏–≥–≥–µ—Ä—ã) | ‚òê 0 ‚òê 1 ‚òê 2 |
| –ü–æ–Ω–∏–º–∞–Ω–∏–µ `EXPLAIN` | ‚òê 0 ‚òê 1 ‚òê 2 |
| –†–æ–ª–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | ‚òê 0 ‚òê 1 ‚òê 2 |
| –ë—ç–∫–∞–ø—ã –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ | ‚òê 0 ‚òê 1 ‚òê 2 |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ | ‚òê 0 ‚òê 1 ‚òê 2 |
| –†–µ–ø–ª–∏–∫–∞—Ü–∏—è | ‚òê 0 ‚òê 1 ‚òê 2 |
| –ö–∞—á–µ—Å—Ç–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è | ‚òê 0 ‚òê 1 ‚òê 2 |

**–ú–∞–∫—Å–∏–º—É–º: 20 –±–∞–ª–ª–æ–≤**

| –ë–∞–ª–ª—ã | –£—Ä–æ–≤–µ–Ω—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ |
|---:|---|
| 18‚Äì20 | –û—Ç–ª–∏—á–Ω–æ |
| 14‚Äì17 | –•–æ—Ä–æ—à–∏–π —É—Ä–æ–≤–µ–Ω—å |
| 10‚Äì13 | –ë–∞–∑–æ–≤—ã–π, –µ—Å—Ç—å –ø—Ä–æ–±–µ–ª—ã |
| < 10 | –ù—É–∂–µ–Ω —Å–µ—Ä—å—ë–∑–Ω—ã–π —Ä–æ—Å—Ç |

---

## üì§ –§–æ—Ä–º–∞—Ç —Å–¥–∞—á–∏

1. –°–¥–µ–ª–∞—Ç—å **fork** –¥–∞–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)  
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ  
3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ GitHub —Å —Ä–µ—à–µ–Ω–∏–µ–º  

---

–£–¥–∞—á–∏ –∏ –¥–æ –≤—Å—Ç—Ä–µ—á–∏ –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º –∏–Ω—Ç–µ—Ä–≤—å—é!
